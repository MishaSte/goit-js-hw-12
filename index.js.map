{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '54467398-e3fbb77cd6756a94fed6b64f1',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst loaderEl = document.querySelector('.loader');\nconst loadButt = document.querySelector('.load-more-btn');\nexport function createGallery(images) {\n  const galleryItems = [];\n\n  images.forEach(image => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = image;\n    const newListElem = document.createElement('li');\n    const link = document.createElement('a');\n    const img = document.createElement('img');\n    const info = document.createElement('div');\n    info.classList.add('info');\n    info.innerHTML = `\n  <div class=\"info-item\">\n    <span class=\"info-title\">Likes</span>\n    <span class=\"info-value\">${likes}</span>\n  </div>\n  <div class=\"info-item\">\n    <span class=\"info-title\">Views</span>\n    <span class=\"info-value\">${views}</span>\n  </div>\n  <div class=\"info-item\">\n    <span class=\"info-title\">Comments</span>\n    <span class=\"info-value\">${comments}</span>\n  </div>\n  <div class=\"info-item\">\n    <span class=\"info-title\">Downloads</span>\n    <span class=\"info-value\">${downloads}</span>\n  </div>\n`;\n\n    newListElem.classList.add('gallery-item');\n\n    link.classList.add('gallery-link');\n    link.setAttribute('href', `${largeImageURL}`);\n\n    img.classList.add('gallery-image');\n    img.setAttribute('src', `${webformatURL}`);\n    img.setAttribute('alt', `${tags}`);\n\n    link.append(img);\n    newListElem.append(link, info);\n    galleryItems.push(newListElem);\n  });\n\n  list.append(...galleryItems);\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  list.innerHTML = '';\n}\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\nexport function hideLoadMoreButton() {\n  loadButt.classList.add('is-hidden');\n}\nexport function showLoadMoreButton() {\n  loadButt.classList.remove('is-hidden');\n}\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item');\n  if (!firstCard) return;\n\n  const cardHeight = firstCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery } from './js/render-functions.js';\nimport { clearGallery } from './js/render-functions.js';\nimport { hideLoader } from './js/render-functions.js';\nimport { showLoader } from './js/render-functions.js';\nimport { hideLoadMoreButton } from './js/render-functions.js';\nimport { showLoadMoreButton } from './js/render-functions.js';\nimport { smoothScroll } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentQuery = '';\nlet page = 1;\nlet totalHits = 0;\nconst PER_PAGE = 15;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = form.elements[`search-text`].value.trim();\n  if (query === '') {\n    iziToast.error({\n      message: 'The field is empty',\n      position: 'topRight',\n    });\n    return;\n  }\n  currentQuery = query;\n  page = 1;\n\n  clearGallery();\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    totalHits = data.totalHits;\n    const hits = data.hits;\n    if (hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    form.reset();\n    createGallery(hits);\n    page += 1;\n\n    if ((page - 1) * PER_PAGE >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    const hits = data.hits;\n    createGallery(hits);\n    smoothScroll();\n    page += 1;\n\n    if ((page - 1) * PER_PAGE >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    showLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["getImagesByQuery","query","page","axios","list","lightbox","SimpleLightbox","loaderEl","loadButt","createGallery","images","galleryItems","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","newListElem","link","img","info","clearGallery","showLoader","hideLoader","hideLoadMoreButton","showLoadMoreButton","smoothScroll","firstCard","cardHeight","form","loadMoreBtn","currentQuery","totalHits","PER_PAGE","event","iziToast","data","hits"],"mappings":"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"}